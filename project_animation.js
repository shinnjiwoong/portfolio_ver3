let mindcraft = {
    "name" : "MINDCRAFT",
    "project_num" : "001",
    "year" : "2019",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/mindcraft_1.png", "assets/project_source/mindcraft_2.png"],
    "video" : ['false'],
    "link" : ["https://soundcloud.com/montikayoti/sets/mindcraft", 'soundcloud'],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Myself (personal work)",
    "description_en" : "- Cover Design : Sicky Cho <br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn "
}
let datura = {
    "name" : "DATURA : TESTTAPE",
    "project_num" : "002",
    "year" : "2019",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/datura_1.png", "assets/project_source/datura_2.png", "assets/project_source/datura_3.png"],
    "video" : ['false'],
    "link" : ["https://open.spotify.com/album/6wumkYIzwCb4HC75H6KqDy?si=F6uUCIDJRuqSj8Qon8KLEQ", "spotify", "https://youtu.be/gqTXPMBMY0o", "TU + DA mv"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Wolf Kooky",
    "description_en" : "- Vocal : Wolf Kooky <br>- Video : 17oz <br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn "
}
let postcorona = {
    "name" : "POSTCORONA",
    "project_num" : "003",
    "year" : "2020",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/postcorona_1.png", "assets/project_source/postcorona_2.png", "assets/project_source/postcorona_3.png"],
    "video" : ['false'],
    "link" : ["https://open.spotify.com/album/4XVJ4p4A3my4qaKoQAmzHs?si=Yxc6Uii0TDySSa6RavOIPQ", "spotify", "https://youtu.be/r71OJW6194k", "FORMLESS visual", "https://youtu.be/CyD3Q1mhFe4", "POTENTIAL mv", "https://youtu.be/oVHx8RgiSOk", "LANDSCAPE mv"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : ProjectOC",
    "description_en" : "- Vocal : ProjectOC <br>- Video : KWONEE <br>- Cover Design : ERRANTH <br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn "
}
let rem = {
    "name" : "REM",
    "project_num" : "004",
    "year" : "2021",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/rem_1.png", "assets/project_source/rem_2.png", "assets/project_source/rem_3.png"],
    "video" : ['false'],
    "link" : ["https://open.spotify.com/album/3o3wiixU7kea7WqqV0slMD?si=d89YGzskSmiRwooYwGt38A", "spotify"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Wolf Kooky",
    "description_en" : "- Vocal : Wolf Kooky <br>- Animation : Cary Nam <br>- Cover Design : Cary Nam <br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn "
}
let artificial_object = {
    "name" : "DIGITS / ARTIFICIAL OBJECT",
    "project_num" : "005",
    "year" : "2021",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/ao_2.png", "assets/project_source/ao_1.png"],
    "video" : ['false'],
    "link" : ["https://open.spotify.com/album/4aiYP97aOHtDt4bmEFk69H?si=Pbf1JusYQ9e0jrByDOyu8w", "spotify", "https://youtu.be/ION7EsKobNA", "DIGITS mv", "https://youtu.be/_UdS-lo9Kek", "BLIND SPOT visual"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : JGP$",
    "description_en" : "- Vocal : JGP$ <br>- Video Production for ＜DIGITS＞: SAPIENS <br>- Video Production for ＜Blind Spot＞ : ERRANTH<br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn"
}
let altgal_simple = {
    "name" : "＜간결한 생각들: 생태-젠더-공산＞",
    "project_num" : "006",
    "year" : "2021",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/simple_thought_1.png", "assets/project_source/simple_thought_2.png"],
    "video" : ['false'],
    "link" : ["https://soundcloud.com/montikayoti/a-sequence-for-sinking?si=652cfd9e3fa540809d0c2b76d6069d74&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing","soundcloud", "http://altspaceloop.com/exhibitions/simplethoughts-2021", "exhibition info"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : 대안공간루프 (ALT SPACE LOOP)",
    "description_en" : "- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn"
}
let kasina_kaffe = {
    "name" : "KASINA Kaffe commercial",
    "project_num" : "007",
    "year" : "2022",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/kaffe_1.png", "assets/project_source/kaffe_2.png", "assets/project_source/kaffe_3.png", "assets/project_source/kaffe_4.png"],
    "video" : ['false'],
    "link" : ["https://www.kasina.co.kr/goods/event_sale.php?sno=126", "shop"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Kasina",
    "description_en" : "- Animation : Cary Nam <br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn"
}
let umm_1 = {
    "name" : "꽃내음 vol.1 | UMM vol.1",
    "project_num" : "008",
    "year" : "2022",
    "scope" : ["mixset", "design"],
    "represent_source" : ["assets/project_source/umm_vol1_1.png", "assets/project_source/umm_vol1_2.png"],
    "video" : ['false'],
    "link" : ["https://soundcloud.com/montikayoti/umm-vol1?si=fc065ae8160d4da7adf4e738704eb97e&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing", "soundcloud"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Myself (personal work)",
    "description_en" : "- Curation & Mix : Jiwoong Shinn <br>- Cover Design : Jiwoong Shinn "
}
let kasina_seongsu = {
    "name" : "KASINA seongsu ave. commercial",
    "project_num" : "009",
    "year" : "2022",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/kasina_ss_1.png"],
    "video" : ['true', "assets/project_videos/kasina_ss.mp4"],
    "link" : ["", ""],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Kasina",
    "description_en" : "- Animation : Cary Nam <br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn"
}
let onerm = {
    "name" : "ONERM : NEVER FALL DOWN",
    "project_num" : "010",
    "year" : "2022",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/onerm_1.png", "assets/project_source/onerm_2.png", "assets/project_source/onerm_3.png"],
    "video" : ['true', "assets/project_videos/onerm.mp4"],
    "link" : ["https://youtu.be/EuHSbNYCJ_U", "video"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : ONERM",
    "description_en" : "- Video Production : 이승원<br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn"
}
let hyndai_casper = {
    "name" : "HYUNDAI CASPER x KASINA commercial",
    "project_num" : "011",
    "year" : "2022",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/casper_kasina_1.png", "assets/project_source/casper_kasina_2.png", "assets/project_source/casper_kasina_3.png"],
    "video" : ['true', "assets/project_videos/casper_kasina.mp4"],
    "link" : ["", ""],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Hyundai CASPER, Kasina",
    "description_en" : "- Animation : Cary Nam <br>- Music : Jiwoong Shinn <br>- Mixing & Mastering : Jiwoong Shinn"
}
let reservoir_dogs = {
    "name" : "RESERVOIR DOGS mix",
    "project_num" : "012",
    "year" : "2022",
    "scope" : ["mixset", "design"],
    "represent_source" : ["assets/project_source/reservoir_dogs_1.png", "assets/project_source/reservoir_dogs_2.png", "assets/project_source/reservoir_dogs_3.png"],
    "video" : ['false'],
    "link" : ["https://soundcloud.com/montikayoti/reservoir_dogs_mixmp3?si=3266bf45ea83445fa38e2b17f337fd02&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing", "soundcloud"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : 저수지 (Reservoir) @ hongdae",
    "description_en" : "- Curation & Mix : Jiwoong Shinn <br>- Cover Design : Jiwoong Shinn"
}
let picit = {
    "name" : "PICIT",
    "project_num" : "013",
    "year" : "2022",
    "scope" : ["programming", "design"],
    "represent_source" : ["assets/project_source/PICIT_1.png", "assets/project_source/PICIT_2.png", "assets/project_source/PICIT_3.png", "assets/project_source/PICIT_4.png"],
    "video" : ['true', "assets/project_videos/picit.mp4"],
    "link" : ["https://github.com/shinnjiwoong/PicIt.com", "about project"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Myself (personal work)",
    "description_en" : "- Web Development : Jiwoong Shinn, Sungwon Yuk <br>- Web Design : Jiwoong Shinn"
}
let gnyang_2022 = {
    "name" : "GNYANG_20_21",
    "project_num" : "014",
    "year" : "2022",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/gnyang_2022_1.png", "assets/project_source/gnyang_2022_2.png"],
    "video" : ['false', ""],
    "link" : ["https://soundcloud.com/montikayoti/sets/gnyang_20_21-monti-kayoti-x-jamwon?si=60ba5e9e80724150b6a88ecd96d39bb8&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing", "soundcloud"],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Myself (personal work)",
    "description_en" : "- Cover Design : Sicky Cho<br>- Music : Jiwoong Shinn & JAMWON"
}
let shinnjiwoong = {
    "name" : "SHINNJIWOONG",
    "project_num" : "015",
    "year" : "2023",
    "scope" : ["programming", "design", "music/sound"],
    "represent_source" : ["assets/project_source/shinn_1.png", "assets/project_source/shinn_2.png", "assets/project_source/shinn_3.png", "assets/project_source/shinn_4.png"],
    "video" : ['true', "assets/project_videos/portfolio_web.mp4"],
    "link" : ["", ""],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Myself (personal work)",
    "description_en" : "- Web Development & Design : Jiwoong Shinn<br>- Music : Jiwoong Shinn"
}

let exodus = {
    "name" : "EXODUS",
    "project_num" : "016",
    "year" : "2023",
    "scope" : ["music/sound"],
    "represent_source" : ["assets/project_source/exodus_1.png", "assets/project_source/exodus_2.png", "assets/project_source/exodus_3.png", "assets/project_source/exodus_4.png", "assets/project_source/exodus_5.png", "assets/project_source/exodus_6.png"],
    "video" : ['false', ""],
    "link" : ["", ""],
    "description_kr" : "<span style='font-size: 1rem'>Project for </span> : Cary Nam & Jimin Choi",
    "description_en" : "- Video Production : Cary Nam & Jimin Choi<br>- Music : Jiwoong Shinn"
}




// VAR
const project_page_container = document.querySelector(".project-page-container")
const left_loading_bar = document.querySelector(".left-loading-bar")
const right_loading_bar = document.querySelector(".right-loading-bar")
const project_page_number = document.querySelector('.project-page-number');
const bottom_bar_prev_btn = document.querySelector('.bottom-bar-prev-btn');
const bottom_bar_next_btn = document.querySelector('.bottom-bar-next-btn');
const scope_music_color = "rgb(255, 0, 0)";
const scope_programming_color = "rgb(0, 255, 255)";
const scope_mixset_color = "rgb(249, 249, 0)";
const scope_design_color = "rgb(8, 0, 255)";
// PROJECT SECTIONS
const sec_1 = document.querySelector(".sec-1");
const sec_2 = document.querySelector(".sec-2");
const sec_3 = document.querySelector(".sec-3");
const sec_4 = document.querySelector(".sec-4");
let sections = [sec_1, sec_2, sec_3, sec_4];

let project_arr = [exodus,shinnjiwoong, gnyang_2022, picit, reservoir_dogs, hyndai_casper, onerm, kasina_seongsu, umm_1, kasina_kaffe, altgal_simple, artificial_object, rem, postcorona, datura, mindcraft];
let whole_page_num = getPageNum();
let page_var = 1;

function getPageNum(){
    console.log(project_arr.length)
    if(project_arr.length % 4 != 0){
        return parseInt(project_arr.length / 4) + 1
    }else{
        return parseInt(project_arr.length / 4)
    }
}
// FUNCTIONS

intro_work_btn.addEventListener("click", async ()=>{
    await hideIntroContents();
    await setPageIndex(1);
    await setPageNum();
    setTimeout(await change_projects(1), 2000);
});
// 프로젝트 전환
async function setPageIndex(num){
    if(num < 1){
        page_var = whole_page_num;
    }else{
        page_var = num;
    }
}
async function getPageIndex(){
    return page_var
}
async function setPageNum(){
    let page = await getPageIndex();
    project_page_number.innerText = `${page} / ${whole_page_num}`
}
async function change_projects(num){
    console.log(whole_page_num)
    if(num == parseInt(project_arr.length/4) + 1){
        let rest = project_arr.length % 4;
        for(let i = 0; i < rest; i++){
            await showProject(sections[i], project_arr[4*(num-1)+i])
        }
        for(let i = 0; i<4-rest ; i++){
            sections[rest + i].style.display = "none";
        }
    }else{
        for(let i = 0 ; i <4; i++){
            sections[i].style.display = "inline-block";
            await showProject(sections[i], project_arr[4*(num-1)+i]);
        }
    }
    
}
async function getCursor(x, y){
    let default_rect = sec_1.getBoundingClientRect();
    if(x > default_rect.width){
        x = x - default_rect.width;
    }
    if(y > default_rect.height){
        y = y - default_rect.height
    }
    return [x, y]
}
async function hideProject(front, back){
    front.style.opacity = "0%";
    back.style.opacity = "0%";
}
async function showFront(front, back){
    front.style.display = "inline-block";
    back.style.display = "none";
    setTimeout(function(){
        front.style.opacity = "100%";
    }, 500)
    
}
async function showBack(front, back){
    front.style.display = "none";
    back.style.display = "inline-block";
    back.style.opacity = "100%";
}
async function hideSource(img){
    img.style.opacity = "0%"
}
async function showSource(img){
    img.style.opacity = "100%"
}
async function showProject(e,p){

    const project_front_container = e.querySelector(".project-front-container")
    const project_back_container = e.querySelector(".project-back-container");
    const project_esc = project_back_container.querySelector(".project-esc-btn .project-esc")
    const project_img = e.querySelector(".project-img");
    const project_title = e.querySelector(".project-title")
    const project_desc_kr = e.querySelector(".project-desc-kr")
    const project_desc_en = e.querySelector(".project-desc-en")
    const project_link_container = e.querySelector('.project-link-container');
    const project_link = e.querySelector(".project-link");
    const project_scope_container = e.querySelector(".project-scope-container");
    const project_arrow_l = e.querySelector('.project-front-container .project-cursor-left');
    const project_arrow_r = e.querySelector('.project-front-container .project-cursor-right')
    const img_len = p.represent_source.length;
    const project_scope_len = p.scope.length;
    const project_index = project_back_container.querySelector(".project-index-container .project-index");
    const project_vid = project_front_container.querySelector(".project-vid");

    let rect = e.getBoundingClientRect();
    let i = 0;
    // project_img.src = "";

    await hideProject(project_front_container, project_back_container);
    setTimeout(function(){
        project_img.src = p.represent_source[0];
        project_title.innerText = p.name;
        project_index.innerText = `${p.project_num} - ${p.year}`
        project_desc_kr.innerHTML = p.description_kr;
        project_desc_en.innerHTML = p.description_en;
        project_link_container.innerHTML = "";
        if(p.link[0] != ""){
            let link_length = p.link.length;

            for(let i = 0; i < link_length-1; i = i+2){
                let link = document.createElement('a');
                link.href = p.link[i];
                link.innerText = p.link[i+1];
                link.classList.add('project-link');
                link.target = "_blank";

                project_link_container.appendChild(link)
            }
            
        }
        
        project_scope_container.innerHTML = "";
        if(p.video[0] == "false"){
            project_vid.style.display = "none";
            project_vid.src = "";
        }else if(p.video[0] == "true"){
            project_vid.src = p.video[1];
            project_vid.style.display = "inline-block";
        }
        for(let i = 0; i < project_scope_len; i++){
            let scope_node = document.createElement('p');
            scope_node.classList.add('project-scope');
            if(p.scope[i] == "music/sound"){
                scope_node.style.color = scope_music_color;
            }else if(p.scope[i] == "programming"){
                scope_node.style.color = scope_programming_color;
            }else if(p.scope[i] == "mixset"){
                scope_node.style.color = scope_mixset_color;
            }else if(p.scope[i] == "design"){
                scope_node.style.color = scope_design_color;
            }
            scope_node.style.borderRadius = '30px'
            scope_node.style.fontWeight = "lighter";
            scope_node.innerText = p.scope[i]
            project_scope_container.appendChild(scope_node);
        }
    }, 500)
    
    project_img.addEventListener("load", async ()=>{
        await showFront(project_front_container, project_back_container)
    })

    project_img.addEventListener("click", async (e)=>{
        
        let rect_width = rect.width;
        let rect_height = rect.height;
        let cursorPoint = await getCursor(e.clientX, e.clientY);
        if(e.clientX>40 && e.clientX<window.innerWidth-40){
            await showBack(project_front_container, project_back_container);
        }
        
    })
    project_vid.addEventListener("click", async (e)=>{
        if(e.clientX>40 && e.clientX<window.innerWidth-40){
            await showBack(project_front_container, project_back_container);
        }
    })
    project_arrow_l.addEventListener('click', async ()=>{
        await hideProject(project_front_container, project_back_container);
        setTimeout(function(){
            project_img.src = "";
            if(p.video[0] == "false"){
                i = i-1;
                project_vid.style.display = "none";
                project_vid.src = "";
                if(i < 0){
                    i = img_len-1
                    project_img.src = p.represent_source[i];
                }else{
                    project_img.src = p.represent_source[i];
                }
            }else if(p.video[0] == "true"){
                i = i-1;
                if(i < 0){
                    project_vid.src = p.video[1];
                    project_vid.style.display = "inline-block";
                    i = img_len;
                }else{
                    project_vid.style.display = "none";
                    project_img.src = p.represent_source[i];
                }
            }
        }, 500)
        await showFront(project_front_container, project_back_container);
    })
    project_arrow_r.addEventListener('click', async ()=>{
        await hideProject(project_front_container, project_back_container);
        setTimeout(function(){
            project_img.src = "";
            if(p.video[0] == "false"){
                i++;
                project_vid.style.display = "none";
                project_vid.src = "";
                if(i == img_len){
                    i = 0;
                    project_img.src = p.represent_source[i];
                }else{
                    project_img.src = p.represent_source[i];
                }
            }else if(p.video[0] == "true"){
                i++;
                if(i == img_len){
                    project_vid.src = p.video[1];
                    project_vid.style.display = "inline-block";
                    i = -1;
                }else{
                    project_vid.style.display = "none";
                    project_img.src = p.represent_source[i];
                }
            }
        }, 500)
        await showFront(project_front_container, project_back_container);
    })
    project_esc.addEventListener("click", async ()=>{
        await showFront(project_front_container, project_back_container);
    })
}

// Changing projects
bottom_bar_prev_btn.addEventListener('click', async ()=>{
    let changing_index = await getPageIndex();
    if(changing_index == 1){
        if(project_arr.length%4 == 0){
            changing_index = parseInt(project_arr.length / 4);
        }else{
            changing_index = parseInt(project_arr.length / 4)+1;
        }
        
    }else{
        changing_index = page_var - 1;
    }
    await setPageIndex(changing_index);
    await setPageNum()
    await change_projects(changing_index);
})

bottom_bar_next_btn.addEventListener('click', async ()=>{
    let changing_index = await getPageIndex();
    if(project_arr.length % 4 == 0 && changing_index == project_arr.length / 4){
        changing_index = 1;
    }else if(project_arr.length % 4 != 0 && changing_index == parseInt(project_arr.length / 4) + 1){
        changing_index = 1
    }
    else{
        changing_index = changing_index + 1;
    }
    await setPageIndex(changing_index);
    await setPageNum();
    await change_projects(changing_index);
})


