let mindcraft = {
    "name" : "MINDCRAFT",
    "project_num" : "001",
    "year" : "2019",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/mindcraft_1.png", "assets/project_source/mindcraft_2.png"],
    "video" : ['false'],
    "link" : ["https://soundcloud.com/montikayoti/sets/mindcraft", 'soundcloud'],
    "description_kr" : "개인적으로 혼란스러웠던 2019년도 말, 마음을 재정비하며 제작한 6곡의 트랙을 담은 앨범.<br>* 러닝타임 19분 27초<br>* 앨범 아트워크 : Sicky Cho",
    "description_en" : "MINDCRAFT, an album with 6 musical pieces to express my chaotic mind state at the time of 2019.<br>* Running time of 19:27<br>* Cover artwork : Sicky Cho. "
}
let datura = {
    "name" : "DATURA : TESTTAPE",
    "project_num" : "002",
    "year" : "2019",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/datura_1.png", "assets/project_source/datura_2.png", "assets/project_source/datura_3.png"],
    "video" : ['false'],
    "link" : ["https://open.spotify.com/album/6wumkYIzwCb4HC75H6KqDy?si=F6uUCIDJRuqSj8Qon8KLEQ", "spotify"],
    "description_kr" : "독풀의 일종인 'DATURA'에서 영감을 얻어 Wolf Kooky와 함께 작업한 음악을 담은 앨범. <br>* 러닝타임 9분 20초 <br>* 보컬 퍼포먼스 : Wolf Kooky<br>* 영상 디렉팅 : 17oz",
    "description_en" : "DATURA:TESTTAPE, an album created with Wolf Kooky, inspired by 'DATURA', one of the strong toxic flowers. <br>* Running time of 9:20 <br>* Vocal Performance : Wolf Kooky<br>* Video Direction : 17oz"
}
let postcorona = {
    "name" : "POSTCORONA",
    "project_num" : "003",
    "year" : "2020",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/postcorona_1.png", "assets/project_source/postcorona_2.png", "assets/project_source/postcorona_3.png"],
    "video" : ['false'],
    "link" : ["https://open.spotify.com/album/4XVJ4p4A3my4qaKoQAmzHs?si=Yxc6Uii0TDySSa6RavOIPQ", "spotify"],
    "description_kr" : "Lozik과 JGP$로 이루어진 듀오 ProjectOC의 정규앨범. COVID-19 바이러스의 창궐 속에서 혼란스러웠던 시기를 경험하며, 그로인한 여러 생각들을 담으려 했다. <br>* 러닝타임 19분 55초<br>* 보컬 퍼포먼스 : ProjectOC",
    "description_en" : "An album created with ProjectOC, the duo of Lozik and JGP$. Tried to express thoughts over the chaotic experience of COVID-19.<br> * Running time of 19:55<br>* Vocal performance : ProjectOC"
}
let rem = {
    "name" : "REM",
    "project_num" : "004",
    "year" : "2021",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/rem_1.png", "assets/project_source/rem_2.png", "assets/project_source/rem_3.png"],
    "video" : ['false'],
    "link" : ["https://open.spotify.com/album/3o3wiixU7kea7WqqV0slMD?si=d89YGzskSmiRwooYwGt38A", "spotify"],
    "description_kr" : "'90년대의 붐뱁'은 나와 Wolf Kooky의 음악적 DNA에 강하게 새겨져있다. REM은 마치 렘수면에 빠지듯 그에 대한 향수를 떠올리며 작업한 곡들을 담았다. 애니메이터 Cary Nam은 이러한 추억을 하나의 '방'으로써 표현하였다. <br>* 러닝타임 13분 4초<br>* 보컬 퍼포먼스 : Wolf Kooky<br>* 앨범 아트워크 및 애니메이션 제작 : Cary Nam",
    "description_en" : "'90's boombap' is carved deep in the DNA of Wolf Kooky and myself. We worked on tracks to reminisce the good feelings of the genre, just like we go intro REM sleep. Cary Nam, the animator, expressed this memory in the form of 'a room'. <br>* Running time of 13:04<br>* Vocal performance : Wolf Kooky<br>* Cover artwork & Animation : Cary Nam"
}
let artificial_object = {
    "name" : "DIGITS / ARTIFICIAL OBJECT",
    "project_num" : "005",
    "year" : "2021",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/ao_2.png", "assets/project_source/ao_1.png"],
    "video" : ['false'],
    "link" : ["https://open.spotify.com/album/4aiYP97aOHtDt4bmEFk69H?si=Pbf1JusYQ9e0jrByDOyu8w", "spotify"],
    "description_kr" : "JGP$와 함께 ",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let altgal_simple = {
    "name" : "＜간결한 생각들: 생태-젠더-공산＞",
    "project_num" : "006",
    "year" : "2021",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/simple_thought_1.png"],
    "video" : ['false'],
    "link" : ["https://soundcloud.com/montikayoti/a-sequence-for-sinking?si=652cfd9e3fa540809d0c2b76d6069d74&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing","soundcloud"],
    "description_kr" : "대안공간 루프 갤러리의 2021년 전시 ＜SIMPLE THOUGHTS: ECOLOGY-GENDER-COMMUNISM | 간결한 생각들: 생태-젠더-공산＞에 참여했다. 전시의 일부로써 시민들이 직접 갤러리의 근방을 걸으며 경험하는 과정.",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let kasina_kaffe = {
    "name" : "KASINA Kaffe commercial",
    "project_num" : "007",
    "year" : "2022",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/kaffe_1.png", "assets/project_source/kaffe_2.png", "assets/project_source/kaffe_3.png", "assets/project_source/kaffe_4.png"],
    "video" : ['false'],
    "link" : ["", ""],
    "description_kr" : "대안공간 루프 갤러리의 2021년 전시 ＜SIMPLE THOUGHTS: ECOLOGY-GENDER-COMMUNISM | 간결한 생각들: 생태-젠더-공산＞에 참여했다. 전시의 일부로써 시민들이 직접 갤러리의 근방을 걸으며 경험하는 과정.",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let umm_1 = {
    "name" : "꽃내음 vol.1 | UMM vol.1",
    "project_num" : "008",
    "year" : "2022",
    "scope" : ["mixset", "design"],
    "represent_source" : ["assets/project_source/umm_vol1_1.png", "assets/project_source/umm_vol1_2.png"],
    "video" : ['false'],
    "link" : ["https://soundcloud.com/montikayoti/umm-vol1?si=fc065ae8160d4da7adf4e738704eb97e&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing", "soundcloud"],
    "description_kr" : "대안공간 루프 갤러리의 2021년 전시 ＜SIMPLE THOUGHTS: ECOLOGY-GENDER-COMMUNISM | 간결한 생각들: 생태-젠더-공산＞에 참여했다. 전시의 일부로써 시민들이 직접 갤러리의 근방을 걸으며 경험하는 과정.",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let kasina_seongsu = {
    "name" : "KASINA seongsu ave. commercial",
    "project_num" : "009",
    "year" : "2022",
    "scope" : ["music"],
    "represent_source" : ["assets/projects/꽃내음.png"],
    "video" : ['true', "assets/project_videos/kasina_seongsu.mp4"],
    "link" : ["", ""],
    "description_kr" : "대안공간 루프 갤러리의 2021년 전시 ＜SIMPLE THOUGHTS: ECOLOGY-GENDER-COMMUNISM | 간결한 생각들: 생태-젠더-공산＞에 참여했다. 전시의 일부로써 시민들이 직접 갤러리의 근방을 걸으며 경험하는 과정.",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let onerm = {
    "name" : "ONERM : NEVER FALL DOWN",
    "project_num" : "010",
    "year" : "2022",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/onerm_1.png", "assets/project_source/onerm_2.png", "assets/project_source/onerm_3.png"],
    "video" : ['true', "assets/project_videos/onerm.mp4"],
    "link" : ["", ""],
    "description_kr" : "ARTIFICIAL OBJECT는 JGP$의 첫 정규앨범입니다. 전곡을 프로듀싱하였습니다. ",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let hyndai_casper = {
    "name" : "HYUNDAI CASPER x KASINA commercial",
    "project_num" : "011",
    "year" : "2022",
    "scope" : ["music"],
    "represent_source" : ["assets/project_source/casper_kasina_1.png", "assets/project_source/casper_kasina_2.png", "assets/project_source/casper_kasina_3.png"],
    "video" : ['true', "assets/project_videos/casper_kasina.mp4"],
    "link" : ["", ""],
    "description_kr" : "대안공간 루프 갤러리의 2021년 전시 ＜SIMPLE THOUGHTS: ECOLOGY-GENDER-COMMUNISM | 간결한 생각들: 생태-젠더-공산＞에 참여했다. 전시의 일부로써 시민들이 직접 갤러리의 근방을 걸으며 경험하는 과정.",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let reservoir_dogs = {
    "name" : "RESERVOIR DOGS mix",
    "project_num" : "012",
    "year" : "2022",
    "scope" : ["mixset", "design"],
    "represent_source" : ["assets/project_source/reservoir_dogs_1.png", "assets/project_source/reservoir_dogs_2.png", "assets/project_source/reservoir_dogs_3.png"],
    "video" : ['false'],
    "link" : ["https://soundcloud.com/montikayoti/reservoir_dogs_mixmp3?si=3266bf45ea83445fa38e2b17f337fd02&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing", "soundcloud"],
    "description_kr" : "대안공간 루프 갤러리의 2021년 전시 ＜SIMPLE THOUGHTS: ECOLOGY-GENDER-COMMUNISM | 간결한 생각들: 생태-젠더-공산＞에 참여했다. 전시의 일부로써 시민들이 직접 갤러리의 근방을 걸으며 경험하는 과정.",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let picit = {
    "name" : "PICIT.com",
    "project_num" : "013",
    "year" : "2022",
    "scope" : ["programming", "design"],
    "represent_source" : ["assets/project_source/PICIT_1.png", "assets/project_source/PICIT_2.png", "assets/project_source/PICIT_3.png", "assets/project_source/PICIT_4.png"],
    "video" : ['true', "assets/project_videos/picit.mp4"],
    "link" : ["", ""],
    "description_kr" : "광학문자인식 (Optical Character Recognition, OCR)기술과 자연어처리 (Natural Language Processing, NLP)기술을 활용한 영단어 학습 웹사이트. <br>사용자는 영문서의 이미지파일을 웹 서버에 업로드하여 이미지 내부의 영단어들과 그 사전적 의미를 제공받게 되며, 그 중 모르는 단어만을 골라서 사용자가 등록한 이메일 주소로 그 단어들을 공유할 수 있다. <br>* 서울과학기술대학교 (SNUST)의 학부 졸업 작품 <br>* Frontend 및 Backend 개발, 웹 디자인",
    "description_en" : "MINDCRAFT is an album with 6 musical pieces. "
}
let shinnjiwoong = {
    "name" : "SHINNJIWOONG.com",
    "project_num" : "014",
    "year" : "2023",
    "scope" : ["programming", "design", "music"],
    "represent_source" : ["assets/project_source/shinn_1.png", "assets/project_source/shinn_2.png", "assets/project_source/shinn_3.png", "assets/project_source/shinn_4.png"],
    "video" : ['true', "assets/project_videos/portfolio_web.mp4"],
    "link" : ["", ""],
    "description_kr" : "4분면을 활용한 포트폴리오 웹사이트.<br>단순한 디자인을 통해 깔끔하게 보이되, 심심하지 않게끔 컬러감을 돋보이게 하는데 중점을 두고 작업했다. <br> * Frontend 개발 및 웹 디자인",
    "description_en" : "My portfolio website using quadraple separated sections. <br>Tried to focus on simple, easy-to-understand design, yet not boring with colors. <br>* Frontend Development, Web design "
}




// VAR
const project_page_container = document.querySelector(".project-page-container")
const left_loading_bar = document.querySelector(".left-loading-bar")
const right_loading_bar = document.querySelector(".right-loading-bar")
const project_page_number = document.querySelector('.project-page-number');
const scope_music_color = "rgb(255, 0, 0)";
const scope_programming_color = "rgb(0, 255, 255)";
const scope_mixset_color = "rgb(249, 249, 0)";
const scope_design_color = "rgb(8, 0, 255)";
// PROJECT SECTIONS
const sec_1 = document.querySelector(".sec-1");
const sec_2 = document.querySelector(".sec-2");
const sec_3 = document.querySelector(".sec-3");
const sec_4 = document.querySelector(".sec-4");
let sections = [sec_1, sec_2, sec_3, sec_4];

let project_arr = [shinnjiwoong, picit, reservoir_dogs, hyndai_casper, onerm, kasina_seongsu, umm_1, kasina_kaffe, altgal_simple, artificial_object, rem, postcorona, datura, mindcraft];
let whole_page_num = getPageNum();
let page_var = 1;

function getPageNum(){
    if(project_arr.length % 4 != 0){
        return parseInt(project_arr.length / 4) + 1
    }else{
        return parseInt(project_arr.length / 4)
    }
}
// FUNCTIONS

intro_work_btn.addEventListener("click", async ()=>{
    await setPageIndex(1);
    await setPageNum();
    setTimeout(async function(){
        for(let i = 0; i<4; i++){
            await showProject(sections[i], project_arr[i]);
        }
    }, 2000)
});
// 프로젝트 전환
async function setPageIndex(num){
    if(num < 1){
        page_var = whole_page_num;
    }else{
        page_var = num;
    }
}
async function getPageIndex(){
    return page_var
}
async function setPageNum(){
    let page = await getPageIndex();
    project_page_number.innerText = `${page} / ${whole_page_num}`
}
async function change_projects(num){
    if(num == parseInt(project_arr.length/4) + 1){
        let rest = project_arr.length % 4;
        for(let i = 0; i < rest; i++){
            await showProject(sections[i], project_arr[4*(num-1)+i])
        }
        for(let i = 0; i<4-rest ; i++){
            sections[rest + i].style.display = "none";
        }
    }else{
        for(let i = 0 ; i <4; i++){
            sections[i].style.display = "inline-block";
            await showProject(sections[i], project_arr[4*(num-1)+i]);
        }
    }
    
}
async function getCursor(x, y){
    let default_rect = sec_1.getBoundingClientRect();
    if(x > default_rect.width){
        x = x - default_rect.width;
    }
    if(y > default_rect.height){
        y = y - default_rect.height
    }
    return [x, y]
}
async function hideProject(front, back){
    front.style.opacity = "0%";
    back.style.opacity = "0%";
}
async function showFront(front, back){
    front.style.display = "inline-block";
    back.style.display = "none";
    setTimeout(function(){
        front.style.opacity = "100%";
    }, 500)
    
}
async function showBack(front, back){
    front.style.display = "none";
    back.style.display = "inline-block";
    back.style.opacity = "100%";
}
async function hideSource(img){
    img.style.opacity = "0%"
}
async function showSource(img){
    img.style.opacity = "100%"
}
async function showProject(e,p){

    const project_front_container = e.querySelector(".project-front-container")
    const project_back_container = e.querySelector(".project-back-container");
    const project_esc = project_back_container.querySelector(".project-esc-btn .project-esc")
    const project_img = e.querySelector(".project-img");
    const project_title = e.querySelector(".project-title")
    const project_desc_kr = e.querySelector(".project-desc-kr")
    const project_desc_en = e.querySelector(".project-desc-en")
    const project_link = e.querySelector(".project-link");
    const project_scope_container = e.querySelector(".project-scope-container");
    const project_arrow_l = e.querySelector('.project-front-container .project-cursor-left');
    const project_arrow_r = e.querySelector('.project-front-container .project-cursor-right')
    const img_len = p.represent_source.length;
    const project_scope_len = p.scope.length;
    const project_index = project_back_container.querySelector(".project-index-container .project-index");
    const project_vid = project_front_container.querySelector(".project-vid");

    let rect = e.getBoundingClientRect();
    let i = 0;
    // project_img.src = "";

    await hideProject(project_front_container, project_back_container);
    setTimeout(function(){
        project_img.src = p.represent_source[0];
        project_title.innerText = p.name;
        project_index.innerText = `${p.project_num} - ${p.year}`
        project_desc_kr.innerHTML = p.description_kr;
        project_desc_en.innerHTML = p.description_en;
        if(p.link[0] != ""){
            project_link.href = p.link[0];
            project_link.innerText = p.link[1];
        }else{
            project_link.href = "";
            project_link.innerText = "";
        }
        
        project_scope_container.innerHTML = "";
        if(p.video[0] == "false"){
            project_vid.style.display = "none";
            project_vid.src = "";
        }else if(p.video[0] == "true"){
            project_vid.src = p.video[1];
            project_vid.style.display = "inline-block";
        }
        for(let i = 0; i < project_scope_len; i++){
            let scope_node = document.createElement('p');
            scope_node.classList.add('project-scope');
            if(p.scope[i] == "music"){
                scope_node.style.color = scope_music_color;
                // scope_node.style.border = `1px solid ${scope_music_color}`
            }else if(p.scope[i] == "programming"){
                scope_node.style.color = scope_programming_color;
                // scope_node.style.border = `1px solid ${scope_programming_color}`
            }else if(p.scope[i] == "mixset"){
                scope_node.style.color = scope_mixset_color;
                // scope_node.style.border = `1px solid ${scope_mixset_color}`
            }else if(p.scope[i] == "design"){
                scope_node.style.color = scope_design_color;
                // scope_node.style.border = `1px solid ${scope_design_color}`
            }
            scope_node.style.borderRadius = '30px'
            scope_node.style.fontWeight = "lighter";
            scope_node.innerText = p.scope[i]
            project_scope_container.appendChild(scope_node);
        }
    }, 500)
    
    project_img.addEventListener("load", async ()=>{
        await showFront(project_front_container, project_back_container)
    })

    project_img.addEventListener("click", async (e)=>{
        
        let rect_width = rect.width;
        let rect_height = rect.height;
        let cursorPoint = await getCursor(e.clientX, e.clientY);
        if(e.clientX>40 && e.clientX<window.innerWidth-40){
            await showBack(project_front_container, project_back_container);
        }
        
    })
    project_vid.addEventListener("click", async (e)=>{
        if(e.clientX>40 && e.clientX<window.innerWidth-40){
            await showBack(project_front_container, project_back_container);
        }
    })
    project_arrow_l.addEventListener('click', async ()=>{
        await hideProject(project_front_container, project_back_container);
        setTimeout(function(){
            project_img.src = "";
            if(p.video[0] == "false"){
                project_vid.style.display = "none";
                project_vid.src = "";
                if(i == img_len - 1){
                    i = 0;
                    project_img.src = p.represent_source[i];
                }else{
                    i++;
                    project_img.src = p.represent_source[i];
                }
            }else if(p.video[0] == "true"){
                if(i >= img_len){
                    project_vid.src = p.video[1];
                    project_vid.style.display = "inline-block";
                    i = 0;
                }else{
                    project_vid.style.display = "none";
                    project_img.src = p.represent_source[i];
                    i++;
                }
            }
        }, 500)
        await showFront(project_front_container, project_back_container);
    })
    project_arrow_r.addEventListener('click', async ()=>{
        await hideProject(project_front_container, project_back_container);
        setTimeout(function(){
            project_img.src = "";
            if(p.video[0] == "false"){
                project_vid.style.display = "none";
                project_vid.src = "";
                if(i == img_len - 1){
                    i = 0;
                    project_img.src = p.represent_source[i];
                }else{
                    i++;
                    project_img.src = p.represent_source[i];
                }
            }else if(p.video[0] == "true"){
                if(i >= img_len){
                    project_vid.src = p.video[1];
                    project_vid.style.display = "inline-block";
                    i = 0;
                }else{
                    project_vid.style.display = "none";
                    project_img.src = p.represent_source[i];
                    i++;
                }
            }
        }, 500)
        await showFront(project_front_container, project_back_container);
    })
    project_esc.addEventListener("click", async ()=>{
        await showFront(project_front_container, project_back_container);
    })
}
window.addEventListener('click', async (e)=>{
    if(e.clientX<40){
        // 왼쪽으로 넘어감
        let changing_index = await getPageIndex();
        if(changing_index == 1){
            changing_index = parseInt(project_arr.length / 4)+1;
        }else{
            changing_index = page_var - 1;
        }
        await setPageIndex(changing_index);
        await setPageNum()
        await change_projects(changing_index);
        
    }
    else if(window.innerWidth - e.clientX < 40){
        // 오른쪽으로 넘어감
        let changing_index = await getPageIndex();
        if(changing_index == parseInt(project_arr.length / 4)+1){
            changing_index = 1;
        }else{
            changing_index = changing_index + 1;
        }
        await setPageIndex(changing_index);
        await setPageNum();
        await change_projects(changing_index);
    }
})





